{"ast":null,"code":"var _s = $RefreshSig$();\nimport api from '../';\nimport { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nfunction useAuth() {\n  _s();\n  //useState() é um hook para alterar o estado de algo\n  const [authenticated, setAuthenticated] = useState(false);\n  //useNavigate() é utilizado para redirecionar o usuario para uma rota \n  const navigate = useNavigate();\n  useEffect(() => {\n    const token = localStorage.getItem('token');\n    if (token) {\n      //JSON.parse() converte JSON em string\n      api.defaults.headers.Authorization = `Bearer ${JSON.parse(token)}`;\n      setAuthenticated(true);\n    }\n  }, []);\n  async function authUser(data) {\n    setAuthenticated(true);\n    localStorage.setItem('token', JSON.stringify(data.token));\n    navigate('/');\n  }\n  async function register(user) {\n    try {\n      const data = await api.post('/users/register', user).then(response => {\n        return response.data;\n      });\n      alert(data.message);\n      await authUser(data);\n    } catch (error) {\n      console.log('Erro ao cadastrar ', error);\n      alert(error.response.data.message);\n    }\n  }\n  async function login(user) {\n    try {\n      const data = await api.post('/users/login', user).then(response => {\n        return response.data;\n      });\n      alert(data.message);\n      await authUser(data);\n      navigate('user/profile');\n    } catch (error) {\n      alert(error.response.data.message);\n    }\n  }\n  function logout() {\n    setAuthenticated(false);\n    localStorage.removeItem('token');\n    api.defaults.headers.Authorization = undefined;\n    navigate('/');\n    alert('Logout realizado com sucesso');\n  }\n  return {\n    authenticated,\n    register,\n    login,\n    logout\n  };\n}\n_s(useAuth, \"cMHCRxMkeyV75zcuty9NPKkUWfY=\", false, function () {\n  return [useNavigate];\n});\nexport default useAuth;","map":{"version":3,"names":["api","useState","useEffect","useNavigate","useAuth","_s","authenticated","setAuthenticated","navigate","token","localStorage","getItem","defaults","headers","Authorization","JSON","parse","authUser","data","setItem","stringify","register","user","post","then","response","alert","message","error","console","log","login","logout","removeItem","undefined"],"sources":["C:/Users/thais.rosa/Desktop/get_a_pet/frontend/src/hooks/useAuth.js"],"sourcesContent":["import api from '../'\r\nimport { useState, useEffect } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\n\r\nfunction useAuth() {\r\n    //useState() é um hook para alterar o estado de algo\r\n    const [authenticated, setAuthenticated] = useState(false)\r\n    //useNavigate() é utilizado para redirecionar o usuario para uma rota \r\n    const navigate = useNavigate()\r\n\r\n    useEffect(() => {\r\n        const token = localStorage.getItem('token')\r\n\r\n        if (token) {\r\n            //JSON.parse() converte JSON em string\r\n            api.defaults.headers.Authorization = `Bearer ${JSON.parse(token)}`\r\n            setAuthenticated(true)\r\n        }\r\n    }, [])\r\n\r\n    async function authUser(data) {\r\n        setAuthenticated(true)\r\n        localStorage.setItem('token', JSON.stringify(data.token))\r\n        navigate('/')\r\n    }\r\n\r\n    async function register(user) {\r\n        try {\r\n            const data = await api.post('/users/register', user)\r\n                .then((response) => {\r\n                    return response.data\r\n                })\r\n            alert(data.message)\r\n            await authUser(data)\r\n        } catch (error) {\r\n            console.log('Erro ao cadastrar ', error)\r\n            alert(error.response.data.message)\r\n        }\r\n    }\r\n\r\n    async function login(user) {\r\n        try {\r\n            const data = await api.post('/users/login', user)\r\n                .then((response) => {\r\n                    return response.data\r\n                })\r\n            alert(data.message)\r\n            await authUser(data)\r\n            navigate('user/profile')\r\n        } catch (error) {\r\n            alert(error.response.data.message)\r\n        }\r\n    }\r\n\r\n    function logout() {\r\n        setAuthenticated(false)\r\n        localStorage.removeItem('token')\r\n        api.defaults.headers.Authorization = undefined\r\n        navigate('/')\r\n        alert('Logout realizado com sucesso')\r\n    }\r\n\r\n    return { authenticated, register, login, logout }\r\n\r\n}\r\n\r\nexport default useAuth"],"mappings":";AAAA,OAAOA,GAAG,MAAM,KAAK;AACrB,SAASC,QAAQ,EAAEC,SAAS,QAAQ,OAAO;AAC3C,SAASC,WAAW,QAAQ,kBAAkB;AAE9C,SAASC,OAAOA,CAAA,EAAG;EAAAC,EAAA;EACf;EACA,MAAM,CAACC,aAAa,EAAEC,gBAAgB,CAAC,GAAGN,QAAQ,CAAC,KAAK,CAAC;EACzD;EACA,MAAMO,QAAQ,GAAGL,WAAW,CAAC,CAAC;EAE9BD,SAAS,CAAC,MAAM;IACZ,MAAMO,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAE3C,IAAIF,KAAK,EAAE;MACP;MACAT,GAAG,CAACY,QAAQ,CAACC,OAAO,CAACC,aAAa,GAAI,UAASC,IAAI,CAACC,KAAK,CAACP,KAAK,CAAE,EAAC;MAClEF,gBAAgB,CAAC,IAAI,CAAC;IAC1B;EACJ,CAAC,EAAE,EAAE,CAAC;EAEN,eAAeU,QAAQA,CAACC,IAAI,EAAE;IAC1BX,gBAAgB,CAAC,IAAI,CAAC;IACtBG,YAAY,CAACS,OAAO,CAAC,OAAO,EAAEJ,IAAI,CAACK,SAAS,CAACF,IAAI,CAACT,KAAK,CAAC,CAAC;IACzDD,QAAQ,CAAC,GAAG,CAAC;EACjB;EAEA,eAAea,QAAQA,CAACC,IAAI,EAAE;IAC1B,IAAI;MACA,MAAMJ,IAAI,GAAG,MAAMlB,GAAG,CAACuB,IAAI,CAAC,iBAAiB,EAAED,IAAI,CAAC,CAC/CE,IAAI,CAAEC,QAAQ,IAAK;QAChB,OAAOA,QAAQ,CAACP,IAAI;MACxB,CAAC,CAAC;MACNQ,KAAK,CAACR,IAAI,CAACS,OAAO,CAAC;MACnB,MAAMV,QAAQ,CAACC,IAAI,CAAC;IACxB,CAAC,CAAC,OAAOU,KAAK,EAAE;MACZC,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAEF,KAAK,CAAC;MACxCF,KAAK,CAACE,KAAK,CAACH,QAAQ,CAACP,IAAI,CAACS,OAAO,CAAC;IACtC;EACJ;EAEA,eAAeI,KAAKA,CAACT,IAAI,EAAE;IACvB,IAAI;MACA,MAAMJ,IAAI,GAAG,MAAMlB,GAAG,CAACuB,IAAI,CAAC,cAAc,EAAED,IAAI,CAAC,CAC5CE,IAAI,CAAEC,QAAQ,IAAK;QAChB,OAAOA,QAAQ,CAACP,IAAI;MACxB,CAAC,CAAC;MACNQ,KAAK,CAACR,IAAI,CAACS,OAAO,CAAC;MACnB,MAAMV,QAAQ,CAACC,IAAI,CAAC;MACpBV,QAAQ,CAAC,cAAc,CAAC;IAC5B,CAAC,CAAC,OAAOoB,KAAK,EAAE;MACZF,KAAK,CAACE,KAAK,CAACH,QAAQ,CAACP,IAAI,CAACS,OAAO,CAAC;IACtC;EACJ;EAEA,SAASK,MAAMA,CAAA,EAAG;IACdzB,gBAAgB,CAAC,KAAK,CAAC;IACvBG,YAAY,CAACuB,UAAU,CAAC,OAAO,CAAC;IAChCjC,GAAG,CAACY,QAAQ,CAACC,OAAO,CAACC,aAAa,GAAGoB,SAAS;IAC9C1B,QAAQ,CAAC,GAAG,CAAC;IACbkB,KAAK,CAAC,8BAA8B,CAAC;EACzC;EAEA,OAAO;IAAEpB,aAAa;IAAEe,QAAQ;IAAEU,KAAK;IAAEC;EAAO,CAAC;AAErD;AAAC3B,EAAA,CA5DQD,OAAO;EAAA,QAIKD,WAAW;AAAA;AA0DhC,eAAeC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}